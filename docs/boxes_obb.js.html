<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Konjo API Documentation</title>
    
    <meta name="description" content="Documentation for Konjo library" />
    
        <meta name="keywords" content="docs, documentation, Konjo, html5, javascript, jsdoc" />
        <meta name="keyword" content="docs, documentation, Konjo, html5, javascript, jsdoc" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"Konjo","footer":"Made with ♥ by Shitake (z1522716486@hotmail.com)","copyright":"Konjo Copyright © 2017-2018 Shitake.","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"Konjo API Documentation","description":"Documentation for Konjo library","keyword":"docs, documentation, Konjo, html5, javascript, jsdoc"},"linenums":true};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Konjo</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        <li class="item" data-name="AABB">
            <span class="title  ">
                
                <a href="AABB.html">AABB</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="AABB#center"><a href="AABB.html#center">center</a></li>
            
                <li class="parent " data-name="AABB#heightRange"><a href="AABB.html#heightRange">heightRange</a></li>
            
                <li class="parent " data-name="AABB#widthRange"><a href="AABB.html#widthRange">widthRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="AABB#aabb2obb"><a href="AABB.html#aabb2obb">aabb2obb</a></li>
            
                <li class="parent  " data-name="AABB#aabb2sphere"><a href="AABB.html#aabb2sphere">aabb2sphere</a></li>
            
                <li class="parent  " data-name="AABB#aabbCollision"><a href="AABB.html#aabbCollision">aabbCollision</a></li>
            
                <li class="parent  " data-name="AABB#obbCollision"><a href="AABB.html#obbCollision">obbCollision</a></li>
            
                <li class="parent  " data-name="AABB#pointCollision"><a href="AABB.html#pointCollision">pointCollision</a></li>
            
                <li class="parent  " data-name="AABB#points"><a href="AABB.html#points">points</a></li>
            
                <li class="parent  " data-name="AABB#sphereCollision"><a href="AABB.html#sphereCollision">sphereCollision</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Axes">
            <span class="title  ">
                
                <a href="Axes.html">Axes</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Axes#degree"><a href="Axes.html#degree">degree</a></li>
            
                <li class="parent " data-name="Axes#origin"><a href="Axes.html#origin">origin</a></li>
            
                <li class="parent " data-name="Axes#x"><a href="Axes.html#x">x</a></li>
            
                <li class="parent " data-name="Axes#y"><a href="Axes.html#y">y</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Axes#point"><a href="Axes.html#point">point</a></li>
            
                <li class="parent  " data-name="Axes#reAxes"><a href="Axes.html#reAxes">reAxes</a></li>
            
                <li class="parent  " data-name="Axes#shadow"><a href="Axes.html#shadow">shadow</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="OBB">
            <span class="title  ">
                
                <a href="OBB.html">OBB</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="OBB#axes"><a href="OBB.html#axes">axes</a></li>
            
                <li class="parent " data-name="OBB#center"><a href="OBB.html#center">center</a></li>
            
                <li class="parent " data-name="OBB#heightRange"><a href="OBB.html#heightRange">heightRange</a></li>
            
                <li class="parent " data-name="OBB#widthRange"><a href="OBB.html#widthRange">widthRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="OBB#aabbCollision"><a href="OBB.html#aabbCollision">aabbCollision</a></li>
            
                <li class="parent  " data-name="OBB#obb2aabb"><a href="OBB.html#obb2aabb">obb2aabb</a></li>
            
                <li class="parent  " data-name="OBB#obb2sphere"><a href="OBB.html#obb2sphere">obb2sphere</a></li>
            
                <li class="parent  " data-name="OBB#obbCollision"><a href="OBB.html#obbCollision">obbCollision</a></li>
            
                <li class="parent  " data-name="OBB#pointCollision"><a href="OBB.html#pointCollision">pointCollision</a></li>
            
                <li class="parent  " data-name="OBB#points"><a href="OBB.html#points">points</a></li>
            
                <li class="parent  " data-name="OBB#sphereCollision"><a href="OBB.html#sphereCollision">sphereCollision</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Point">
            <span class="title  ">
                
                <a href="Point.html">Point</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Point#x"><a href="Point.html#x">x</a></li>
            
                <li class="parent " data-name="Point#y"><a href="Point.html#y">y</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Point#distance"><a href="Point.html#distance">distance</a></li>
            
                <li class="parent  " data-name="Point#distanceAxis"><a href="Point.html#distanceAxis">distanceAxis</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Range">
            <span class="title  ">
                
                <a href="Range.html">Range</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Range#first"><a href="Range.html#first">first</a></li>
            
                <li class="parent " data-name="Range#last"><a href="Range.html#last">last</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Range#collision"><a href="Range.html#collision">collision</a></li>
            
                <li class="parent  " data-name="Range#hit"><a href="Range.html#hit">hit</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Sphere">
            <span class="title  ">
                
                <a href="Sphere.html">Sphere</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Sphere#heightRange"><a href="Sphere.html#heightRange">heightRange</a></li>
            
                <li class="parent " data-name="Sphere#widthRange"><a href="Sphere.html#widthRange">widthRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Sphere#aabbCollision"><a href="Sphere.html#aabbCollision">aabbCollision</a></li>
            
                <li class="parent  " data-name="Sphere#obbCollision"><a href="Sphere.html#obbCollision">obbCollision</a></li>
            
                <li class="parent  " data-name="Sphere#pointCollision"><a href="Sphere.html#pointCollision">pointCollision</a></li>
            
                <li class="parent  " data-name="Sphere#sphere2aabb"><a href="Sphere.html#sphere2aabb">sphere2aabb</a></li>
            
                <li class="parent  " data-name="Sphere#sphere2obb"><a href="Sphere.html#sphere2obb">sphere2obb</a></li>
            
                <li class="parent  " data-name="Sphere#sphereCollision"><a href="Sphere.html#sphereCollision">sphereCollision</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Vector2">
            <span class="title  ">
                
                <a href="Vector2.html">Vector2</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Vector2#x"><a href="Vector2.html#x">x</a></li>
            
                <li class="parent " data-name="Vector2#y"><a href="Vector2.html#y">y</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Vector2#abs"><a href="Vector2.html#abs">abs</a></li>
            
                <li class="parent  " data-name="Vector2#add"><a href="Vector2.html#add">add</a></li>
            
                <li class="parent  " data-name="Vector2#cross"><a href="Vector2.html#cross">cross</a></li>
            
                <li class="parent  " data-name="Vector2#dot"><a href="Vector2.html#dot">dot</a></li>
            
                <li class="parent  " data-name="Vector2#max"><a href="Vector2.html#max">max</a></li>
            
                <li class="parent  " data-name="Vector2#min"><a href="Vector2.html#min">min</a></li>
            
                <li class="parent  " data-name="Vector2#mod"><a href="Vector2.html#mod">mod</a></li>
            
                <li class="parent  " data-name="Vector2#sub"><a href="Vector2.html#sub">sub</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="boxes_obb.js.html">Source: boxes/obb.js</h1>
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>boxes/obb.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source linenums"><code>import Range from '../common/range'
import Point from '../common/point'
import Axes from '../common/axes'
import Base from './base'
import AABB from './aabb'
import Sphere from './sphere'

/**
 * Oriented bounding box class.
 *
 */
class OBB extends Base {
  get x () { return this._x }
  set x (value) {
    this._x = value
    this._create()
  }

  get y () { return this._y }
  set y (value) {
    this._y = value
    this._create()
  }

  get width () { return this._width }
  set width (value) {
    this._width = value
    this._create()
  }

  get height () { return this._height }
  set height (value) {
    this._height = value
    this._create()
  }

  get angle () { return this._angle }
  set angle (value) {
    this._angle = value
    this._create()
  }

  /**
   * The axes of this obb.
   *
   * @return {*}
   */
  get axes () { return this._axes }

  /**
   * The overall width range of this obb.
   * @return {Range}
   */
  get widthRange () { return this._widthRange }

  /**
   * The overall height range of this obb.
   * @return {Range}
   */
  get heightRange () { return this._heightRange }

  /**
   * The center point of this obb.
   * @return {Point}
   */
  get center () { return this._center }

  /**
   * Returns an oriented bounding box object.
   * @param {Number} [x=0] - The X coordinate of the upper-left corner of the obb.
   * @param {Number} [y=0] - The Y coordinate of the upper-left corner of the obb.
   * @param {Number} [width=0] - The width of this obb.
   * @param {Number} [height=0] - The height of this obb.
   * @param {Number} [angle=0] - The overall height of this obb.
   */
  constructor (x = 0, y = 0, width = 0, height = 0, angle = 0) {
    super()
    this._x = x
    this._y = y
    this._width = width
    this._height = height
    this._angle = angle
    this._create()
  }

  _create () {
    this._center = new Point(this.x, this.y)
    this._axes = new Axes(this.center, this.angle)
    this._widthRange = new Range(-this.width / 2, this.width / 2)
    this._heightRange = new Range(-this.height / 2, this.height / 2)
  }

  /**
   * Get an array of point objects that span the four vertices of the obb.
   *
   * @return {Array&lt;Point>}
   */
  points () {
    let axes = this.axes.reAxes()
    return [
      axes.point(new Point(this.width / 2, this.height / 2)),
      axes.point(new Point(-this.width / 2, this.height / 2)),
      axes.point(new Point(this.width / 2, -this.height / 2)),
      axes.point(new Point(-this.width / 2, -this.height / 2))
    ]
  }

  /**
   * Checks whether the point object given are contained within this obb.
   *
   * @param {Point} point - The point object of test.
   */
  pointCollision (point) {
    point = this.axes.point(point)
    return this.widthRange.hit(point.x) &amp;&amp; this.heightRange.hit(point.y)
  }

  /**
   * Checks whether the aabb object given are contained within this obb.
   *
   * @param {AABB} aabb - The aabb object of test
   */
  aabbCollision (aabb) {
    if (this.angle % 90 === 0) {
      return this.obb2aabb().aabbCollision(aabb)
    } else {
      return this.obbCollision(aabb.aabb2obb())
    }
  }

  /**
   * Checks whether the obb object given are contained within this obb.
   *
   * @param {OBB} obb - The obb object of test
   */
  obbCollision (obb) {
    let obbInCenter = this.axes.point(obb.center)
    let inObbCenter = obb.axes.point(this.center)
    let owRange = new Range(obbInCenter.x - obb.width / 2, obbInCenter.x + obb.width / 2)
    let ohRange = new Range(obbInCenter.y - obb.height / 2, obbInCenter.y + obb.height / 2)
    let woRange = new Range(inObbCenter.x - this.width / 2, inObbCenter.x + this.width / 2)
    let hoRange = new Range(obbInCenter.y - this.height / 2, obbInCenter.y + this.height / 2)
    let wRangeCollision = this.widthRange.collision(owRange)
    let hRangeCollision = this.heightRange.collision(ohRange)
    let obbWidthRangeCollision = obb.widthRange.collision(woRange)
    let obbHeightRangeCollision = obb.heightRange.collision(hoRange)
    return wRangeCollision &amp;&amp; hRangeCollision &amp;&amp; obbWidthRangeCollision &amp;&amp; obbHeightRangeCollision
  }

  /**
   * Checks whether the sphere object given are contained within this obb.
   *
   * @param {Sphere} sphere - The sphere object of test
   */
  sphereCollision (sphere) {
    return sphere.obbCollision(this)
  }

  /**
   * Transforms this object into a new AABB object and returns.
   *
   * @return {AABB}
   */
  obb2aabb () {
    if (this.angle === 0) {
      return new AABB(this.x - this.width / 2, this.y - this.height / 2, this.width, this.height)
    }
    let points = this.points()
    let maxX, maxY, minX, minY
    points.forEach((point) => {
      if (maxX === void 0) maxX = point.x
      if (minX === void 0) minX = point.x
      if (maxY === void 0) maxY = point.y
      if (minY === void 0) minY = point.y
      if (point.x > maxX) maxX = point.x
      if (point.x &lt; minX) minX = point.x
      if (point.y > maxY) maxY = point.y
      if (point.y &lt; minY) minY = point.y
    })
    return new AABB(minX, minY, maxX - minX, maxY - minY)
  }

  /**
   * Transforms this object into a new Sphere object and returns.
   *
   * @return {Sphere}
   */
  obb2sphere () {
    let radius = Math.sqrt((this.width / 2) ** 2 + (this.height / 2) ** 2)
    return new Sphere(this.x, this.y, radius)
  }
}

export default OBB
</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Jan 14 2018 20:56:32 GMT+0800 (CST)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
